<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"><head>
    <head>
        <meta charset="UTF-8">
        <title>Your Timeline</title>
        <!-- 버튼 부트스트랩 -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <!-- 폰트어썸 아이콘 -->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/mypage/timeline/style.css" />

    </head>
<body>
<section class="intro">
    <div class="container">
        <h1> TimeLine <i class="fa fa-history" aria-hidden="true"></i> </h1>

    </div>
</section>

<section class="timeline">
    <ul>
        <li th:each="events, num : ${events}">
            <div>
                <span class="timeline-content-info-date">
                    [[${#strings.substring(events.date,0,10)}]]
                </span>
                <h3>
                    [[${events.name}]]

                </h3>
                <span class="timeline-content-info-title">
                    <i class="fa fa-certificate" aria-hidden="true"></i>
                [[${events.location}]]
                </span>

                <!-- 작성--><!--TODO 등록기능은 작동확인-->
                <span th:each="timelines, num2 : ${timelines}">
                    <span th:if="${num.index}==${num2.index}">
                <form onsubmit="spaceCheck(this); return false;"
                      th:action="@{|/mypage/timeline/memo/${timelines.id}|}" method="post"
                      th:object="${requestDto}"
                      th:if="${timelines.memo}==null"
                      >
                    <textarea th:field="*{memo}" id="memo" class="form-control" rows="3" placeholder="Write your own memo here!"></textarea>
                        <input type="submit" value="등록" class="btn btn-dark btn-sm">
                </form>
                    </span>
                </span>


                <span th:each="timelines, num2 : ${timelines}">
                    <span th:if="${num.index}==${num2.index} and ${timelines.memo}!=null">
                        <!--조회-->
                        <span  th:classappend="${timelines.id}" th:text="${timelines.memo}"></span>
                            <!-- 수정버튼--> <!--TODO-->
                            <a href="#" id="btn-memo-update" class="btn btn-dark btn-sm" th:onclick="findHideId([[${timelines.id}]])" data-toggle="collapse" th:attr="data-target='.multi-collapse-'+${timelines.id}">수정</a>
                            <!--삭제버튼--> <!--TODO-->
                        <input type="button" value="삭제" id="btn-memo-delete" class="btn btn-dark btn-sm" >


                        <form onsubmit="spaceCheck(this); return false;"
                          class="collapse"
                          th:classappend="'multi-collapse-'+${timelines.id}"
                          th:action="@{|/mypage/timeline/memo/${timelines.id}|}" method="post">

                            <input type="hidden" id="togethersId"  th:value="${timelines.id}">
                            <textarea th:text="${requestDto.memo}" id="memo" class="form-control" rows="3" placeholder="Write your own memo here!"></textarea>
                            <input type="submit" value="저장" id="btn-memo-save" class="btn btn-dark btn-sm">
                        </form>
                    </span>
                </span>
            </div>
        </li>
    </ul>
</section>
<script src="/mypage/timeline/main.js"></script>
</body>
</html>
